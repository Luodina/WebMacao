<div class="row people-main">
    <div class="row" style=" background-color: #FFFFFF;">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="row" style="margin:15px;" style="width:100%">
                <div ng-if="selectedPerson" class="col-lg-3 col-md-3 col-sm-3">
                    People Details
                    <div>
                        <img width='120px;' height='120px;' src="{{selectedPerson.image}}">
                    </div>
                    <div>
                        ID: {{selectedPerson._id}}
                    </div>
                    <div>
                        Name: {{selectedPerson.personname}}
                    </div>
                    <div>
                        AltName: {{selectedPerson.altname}}
                    </div>
                    <div>
                        Sex: {{selectedPerson.sex}}
                    </div>
                    <div>
                        Nationality: {{selectedPerson.nationality | date:'dd/MM/yyyy'}}
                    </div>
                    <div>
                        Registered Date: {{selectedPerson.create_dt}}
                    </div>
                </div>
                <div ng-class="style">
                    <div class="row" style="padding:15px;">
                        <div class="col-lg-5 col-md-5 col-sm-5">
                            <div class="row">
                                <div class="col-lg-2 col-md-3 col-sm-3">
                                    Date
                                </div>
                                <div class="col-lg-10 col-md-9 col-sm-9" style="padding-left: 0px;padding-right: 10px;">
                                    <div class="col-lg-6 col-md-6 col-sm-6">
                                        <p class="input-group" style="min-width: 145px;">
                                            <input type="text" class="form-control" datetime-picker="yyyy-MM-dd HH:mm" required timepicker-options="{showMeridian: false}" button-bar="false" ng-model="period.start" is-open="period.t1" datepicker-append-to-body="true">
                                            <span class="input-group-btn">
                                            <button type="button" class="btn btn-default" ng-click="period.t1 = true;" style="margin-top: 0px;">
                                                <i class="glyphicon glyphicon-calendar"></i>
                                            </button>
                                        </span>
                                        </p>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6">
                                        <p class="input-group" style="min-width: 145px;">
                                            <input type="text" class="form-control" datetime-picker="yyyy-MM-dd HH:mm" required timepicker-options="{showMeridian: false}" button-bar="false" ng-model="period.finish" is-open="period.t2" datepicker-append-to-body="true">
                                            <span class="input-group-btn">
                                        <button type="button" class="btn btn-default" ng-click="period.t2 = true;" style="margin-top: 0px;">
                                            <i class="glyphicon glyphicon-calendar"></i>
                                        </button>
                                    </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="margin-top: 15px;">
                                <div class="col-lg-2 col-md-3 col-sm-3">
                                    Location
                                </div>
                                <div class="col-lg-10 col-md-9 col-sm-9">
                                    <div class="input-group">
                                        <input type="text" ng-change="filterLocation()" ng-model="searchFilter.location" class="form-control" placeholder="Location" aria-describedby="basic-addon1" style="min-width: 145px;border-radius:4px;">
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="margin-top: 25px; padding-left: 15px;">
                                <button type="button" class="btn btn-primary" style="margin-top: 0px;" ng-click="applyFilter()">Filter</button>
                                <button type="button" class="btn btn-primary" style="margin-top: 0px;" ng-click="reset()">Reset</button>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="row">
                                <div class="col-lg-2 col-md-3 col-sm-3">
                                    Camera
                                </div>
                                <div class="col-lg-10 col-md-9 col-sm-9">
                                    <div class="dropdown">
                                        <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                                {{selected}}
                                    <span class="caret"></span>
                                    </button>
                                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                                            <li ng-repeat="camera in cameras">
                                                <a ng-click="setSelected(camera.name)">{{camera.name}}</a>
                                            </li>
                                            <li ng-show="selected!='ALL'" role="separator" class="divider"></li>
                                            <li ng-show="selected!='ALL'"><a ng-click="setSelected('ALL')">All</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="margin-top: 15px;">
                                <div class="col-lg-2 col-md-3 col-sm-3">
                                    Name
                                </div>
                                <div class="col-lg-10 col-md-9 col-sm-9">
                                    <div class="input-group">
                                        <input type="text" style="min-width: 200px;border-radius:4px;" ng-model="searchFilter.name" class="form-control" placeholder="Name" aria-describedby="basic-addon1">
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-2 col-md-3 col-sm-3">
                                </div>
                                <div class="col-lg-10 col-md-9 col-sm-9">
                                    <div class="checkbox">
                                        <label>
                                    <input type="checkbox" ng-model="inclUnregistr"> Include Unregistered People
                                </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="padding-left: 15px; padding-right: 15px; margin-top: 15px;">
                        <div style="min-height: 450px;">
                            <table class="table table-striped" style="min-height: 450px;">
                                <thead class="thead-light" style="background-color:#eaeaea">
                                    <tr>
                                        <th scope="col" ng-if="!selectedPerson">#</th>
                                        <th scope="col" ng-if="!selectedPerson">Name</th>
                                        <th scope="col" ng-if="!selectedPerson">Captured Image</th>
                                        <th scope="col">Date</th>
                                        <th scope="col">Time</th>
                                        <th scope="col">Similarity</th>
                                        <th scope="col" ng-if="!selectedPerson">Camera</th>
                                        <th scope="col">Location</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <div ng-show="history.length!=0">
                                        <!-- dynamic filtering 
                                        <tr ng-repeat="item in history| filter: filterDocuments track by $index"> 
                                            -->
                                        <tr ng-repeat="item in history track by $index">
                                            <th ng-if="!selectedPerson" scope="row">{{$index+1}}</th>
                                            <td ng-if="!selectedPerson"><a>{{item.personname?item.personname:'UNREGISTERED'}}</a></td>
                                            <td ng-if="!selectedPerson">
                                                <img width='70px;' height='70px;' src="data:image/jpg;base64,{{ item.image_file }}">
                                            </td>
                                            <td> {{item.rec_time | date:'dd/MM/yyyy'}}</td>
                                            <td>{{ item.rec_time | date:'hh:mm:ss'}}</td>
                                            <td>{{ item.similarity}}</td>
                                            <td ng-if="!selectedPerson">{{ item.name }}</td>
                                            <td>{{ item.location }}</td>
                                        </tr>
                                    </div>
                                    <div ng-show="history.length==0">
                                        <span us-spinner="{color:blue,radius:30, width:8, length: 16}" spinner-key="spinner-1" spinner-start-active="true"></span>
                                    </div>
                                </tbody>
                            </table>
                        </div>
                        <div ng-if="pages > 1">
                            <nav aria-label="Page navigation ">
                                <ul class="pagination">
                                    <li ng-if="curPage>2"><a ng-click="search(curPage-1)"><span aria-hidden="true">&laquo;</span></a></li>
                                    <li ng-if="curPage<=2" class="disabled"><a><span>&laquo;</span></a></li>
                                    <li ng-if="curPage!=pages && (curPage+1)==pages" ng-click="search(curPage-1)"><a href="# ">...</a></li>
                                    <li ng-if="curPage!=pages && (curPage-1)==1" ng-click="search(curPage-1)"><a href="# ">{{curPage-1}}</a></li>
                                    <li ng-class="{active: true }" ng-if="curPage!=pages" ng-click="search(curPage)"><a href="# ">{{curPage}}</a></li>
                                    <li ng-if="curPage!=pages && (curPage+1)==pages" ng-click="search(curPage+1)"><a href="# ">{{curPage+1}}</a></li>
                                    <li ng-if="curPage!=pages && (curPage+1)<pages" ng-click="search(curPage+1)"><a href="# ">{{curPage+1}}</a></li>
                                    <li ng-if="curPage!=pages && (curPage+2)<pages" ng-click="search(curPage+2)"><a href="# ">...</a></li>
                                    <li ng-if="curPage!=pages && (curPage+2)==pages" ng-click="search(curPage+2)"><a href="# ">{{curPage+2}}</a></li>
                                    <li ng-if="curPage==pages && (curPage-2)==1" ng-click="search(curPage-2)"><a href="# ">{{curPage-2}}</a></li>
                                    <li ng-if="curPage==pages && (curPage-2)>1" ng-click="search(curPage-2)"><a href="# ">...</a></li>
                                    <li ng-if="curPage==pages && (curPage-1)>1" ng-click="search(curPage-1)"><a href="# ">{{curPage-1}}</a></li>
                                    <li ng-if="curPage==pages && (curPage-1)==1" ng-click="search(curPage-1)"><a href="# ">{{curPage-1}}</a></li>
                                    <li ng-class="{active: true }" ng-if="curPage==pages" ng-click="search(curPage)"><a href="# ">{{curPage}}</a></li>
                                    <li ng-if="curPage==pages && (curPage-1)==1" ng-click="search(curPage+1)"><a href="">...</a></li>
                                    <li ng-if="curPage<(pages-2)"><a ng-click="search(curPage+1)"><span aria-hidden="true">&raquo;</span></a></li>
                                    <li ng-if="curPage>=(pages-2)" class="disabled"><a><span>&raquo;</span></a></li>
                                </ul>
                            </nav>
                        </div>
                        <!-- <nav aria-label="Page navigation">
                        <ul class="pagination">
                            <li>
                                <a href="#" aria-label="Previous">
                                    <span aria-hidden="true">&laquo;</span>
                                </a>
                            </li>
                            <li><a href="#">1</a></li>
                            <li><a href="#">2</a></li>
                            <li><a href="#">3</a></li>
                            <li><a href="#">4</a></li>
                            <li><a href="#">5</a></li>
                            <li>
                                <a href="#" aria-label="Next">
                                    <span aria-hidden="true">&raquo;</span>
                                </a>
                            </li>
                        </ul>
                    </nav> -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .full button span {
        background-color: limegreen;
        border-radius: 32px;
        color: black;
    }
    
    .partially button span {
        background-color: orange;
        border-radius: 32px;
        color: black;
    }
</style>

<script>
    $(document).ready(function() {
        recalculateDivSize();
    });

    $(window).resize(function() {
        //alert("Screen REsized");
        recalculateDivSize();
    });

    function recalculateDivSize() {
        var navbar_header_height = $(".navbar-header").height();
        var window_height = $(window).height() - navbar_header_height;
        $(".people-main").css("height", window_height - 10); //Boarder + padding
    }
</script>